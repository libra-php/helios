{% extends "layouts/admin.html" %}

{% block top  %}
	<div id="links" class="w-100 my-1" hx-boost="true" hx-select="#module" hx-target="#module" hx-swap="outerHTML">
		{% for i,link in filters.links %}
		<span class="badge bg-dark" ><a class="link-light filter-link {% if filters.filter_link == i %}active{% endif %}" href="?filter_link={{ i }}">{{ link }} [<span hx-swap="textContent" hx-trigger="load" hx-get="?filter_count={{ i }}" hx-target="this">...</span>]</a></span>
		{% endfor %}
	</div>
{% endblock %}

{% block middle %}
<table class="table {% if table.rows|length > 1 %}table-hover{% endif %} table-sm caption-top">
	<thead class="sticky-top bg-dark text-light p-0">
		<tr class="p-0">
			{% for title in table.columns %}
			<th>{{ title }}</th>
			{% endfor %}
		</tr>
	</thead>
	<tbody>
		{% for row in table.rows %}
		<tr>
			{% for col in row %}
			<td>{{ col|raw }}</td>
			{% endfor %}
		</tr>
		{% endfor %}
	</tbody>
</table>
{% endblock %}

{% block bottom %}
<div class="d-flex align-items-center">
	<nav class="flex-grow-1" aria-label="page navigation">
		<ul class="pagination pagination-sm mb-0">
			<li class="page-item {% if pagination.page < 2 %}disabled{% endif %}"><a class="page-link" href="?page={{ pagination.page - 1 }}">Previous</a></li>
			{% for i in 1..pagination.total_pages %}
			{% if i <= pagination.total_pages and i > pagination.page - 3 and i < pagination.page + 3 %}
			<li class="page-item {% if i == pagination.page %}active{% endif %}"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
			{% endif %}
			{% endfor %}
			<li class="page-item {% if pagination.page >= pagination.total_pages %}disabled{% endif %}"><a class="page-link" href="?page={{ pagination.page + 1 }}">Next</a></li>
		</ul>
	</nav>
	<select hx-get="" hx-trigger="change" class="form-select form-select-sm" name="per_page" id="per-page">
		<option disabled>Results per page</option>
		{% for i in pagination.page_options %}
		<option value="{{ i }}" {% if i == pagination.per_page %}selected{% endif %}>{{ i }}</option>
		{% endfor %}
	</select>
</div>
{% endblock %}
