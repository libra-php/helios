<div id="{{ id }}" class="ql-container ql-snow" style="height: 200px;">
    <div class="ql-editor" data-placeholder="Compose something...">{{ value|raw }}</div>
</div>
<input type="hidden" id="hidden-{{ id }}" name="{{ name }}" value="{{ value }}" />
<script>
    var quill = new Quill("#{{ id }}", {
        theme: 'snow',
        modules: {
        toolbar: [
          [{ header: [1, 2, false] }],
          ['bold', 'italic', 'underline'],
          ['code-block'], // Add code block button
        ]
      },
      formats: ['header', 'bold', 'italic', 'underline', 'code-block']
    });
    var el = document.querySelector('#{{ id }}');
    var form = el.closest("form");
    var hiddenInput = document.querySelector('#hidden-{{ id }}');

    form.addEventListener('submit', function() {
        var content = quill.root.innerHTML;
        console.log(content);
        hiddenInput.value = content;
    });
</script>
